<div class="page-wrapper">
  <div class="content">
    <!-- Page Header -->
    <div class="page-header">
      <div class="row">
        <div class="col-sm-12">
          <ul class="breadcrumb">
            <li class="breadcrumb-item">
              <a [routerLink]="routes.patients.list">Clients </a>
            </li>
            <li class="breadcrumb-item">
              <i class="feather icon-chevron-right"></i>
            </li>
            <li class="breadcrumb-item active">Edit Client</li>
          </ul>
          <div class="doctor-submit text-start">
            <button class="btn btn-primary btn-sm" (click)="goBack()">
              Back
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- Loader -->
    <div *ngIf="!patient">
      <mat-progress-bar mode="indeterminate"> </mat-progress-bar>
    </div>
    <!-- /Page Header -->
    <!-- Form -->
    <form class="row" *ngIf="patient" autocomplete="off">
      <!-- Patient -->
      <div class="col-sm-12">
        <div class="card">
          <div class="card-body">
            <form autocomplete="off">
              <div class="row">
                <div class="col-12">
                  <div class="form-heading">
                    <h4>Client Edit: {{ patient.patient_identifier }}</h4>
                  </div>
                </div>
                <!-- First Name  -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      Patient's First Name <span class="login-danger">*</span>
                    </label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="first_name"
                      formControlName="first_name"
                      type="text"
                    />
                  </div>
                </div>
                <!-- Last Name -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label
                      >Patient's Last Name
                      <span class="login-danger">*</span></label
                    >
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="last_name"
                      formControlName="last_name"
                      type="text"
                    />
                  </div>
                </div>
                <!-- Birth day -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      Patient's Birth day <span class="login-danger">*</span>
                    </label>
                    <input
                      class="form-control datetimepicker"
                      name="birth_date"
                      formControlName="birth_date"
                      type="text"
                      matInput
                      [matDatepicker]="picker"
                    />
                    <mat-datepicker #picker></mat-datepicker>
                    <mat-datepicker-toggle
                      matIconSuffix
                      [for]="picker"
                    ></mat-datepicker-toggle>
                  </div>
                </div>
                <!-- Age -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>Age <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="age"
                      formControlName="age"
                      type="number"
                    />
                  </div>
                </div>
                <!-- Gender -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group select-gender">
                    <label class="gen-label">
                      Sex<span class="login-danger">*</span>
                    </label>
                    <div class="form-check-inline" [formGroup]="form">
                      <label class="form-check-label">
                        <input
                          type="radio"
                          name="gender"
                          [value]="1"
                          formControlName="gender"
                          class="form-check-input"
                        />Male
                      </label>
                    </div>
                    <div class="form-check-inline" [formGroup]="form">
                      <label class="form-check-label">
                        <input
                          type="radio"
                          name="gender"
                          [value]="2"
                          formControlName="gender"
                          class="form-check-input"
                        />Female
                      </label>
                    </div>
                  </div>
                </div>
                <!-- Patient ID -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      Patient ID <span class="login-danger">*</span>
                    </label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="patient_identifier"
                      formControlName="patient_identifier"
                      type="text"
                    />
                  </div>
                </div>
                <!-- Education -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>Education <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="education"
                      formControlName="education"
                      type="text"
                    />
                  </div>
                </div>
                <!-- Profession -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      Profession <span class="login-danger">*</span>
                    </label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="profession"
                      formControlName="profession"
                      type="text"
                    />
                  </div>
                </div>
                <!-- School Name -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      School Name <span class="login-danger">*</span>
                    </label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="school_name"
                      formControlName="school_name"
                      type="text"
                    />
                  </div>
                </div>
                <!-- School Number -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      School Number <span class="login-danger">*</span>
                    </label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="school_number"
                      formControlName="school_number"
                      type="text"
                    />
                  </div>
                </div>
                <!-- Parent/Guardian Name -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      Parent/Guardian Name<span class="login-danger"
                        >*</span
                      ></label
                    >
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="parent_guardian_name"
                      formControlName="parent_guardian_name"
                      type="text"
                    />
                  </div>
                </div>
                <!-- Parent Gender -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group select-gender">
                    <label class="gen-label">
                      Parent's Sex<span class="login-danger">*</span>
                    </label>
                    <div class="form-check-inline" [formGroup]="form">
                      <label class="form-check-label">
                        <input
                          type="radio"
                          name="parent_gender"
                          [value]="1"
                          formControlName="parent_gender"
                          class="form-check-input"
                        />Male
                      </label>
                    </div>
                    <div class="form-check-inline" [formGroup]="form">
                      <label class="form-check-label">
                        <input
                          type="radio"
                          name="parent_gender"
                          [value]="2"
                          formControlName="parent_gender"
                          class="form-check-input"
                        />Female
                      </label>
                    </div>
                  </div>
                </div>
                <!-- Parent/Guardian's Birth day -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label
                      >Parent/Guardian's Birth day
                      <span class="login-danger">*</span></label
                    >
                    <input
                      class="form-control datetimepicker"
                      autocomplete="off"
                      name="parent_birth_date"
                      formControlName="parent_birth_date"
                      type="text"
                      matInput
                      [matDatepicker]="picker_parent_birth_date"
                    />
                    <mat-datepicker #picker_parent_birth_date></mat-datepicker>
                    <mat-datepicker-toggle
                      matIconSuffix
                      [for]="picker_parent_birth_date"
                    ></mat-datepicker-toggle>
                  </div>
                </div>
                <!-- Relationship -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label
                      >Relationship <span class="login-danger">*</span></label
                    >
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="relationship"
                      formControlName="relationship"
                      type="text"
                    />
                  </div>
                </div>
                <!-- <div class="row">
                  <label>Is Patient's Condition Related to: <span class="login-danger">*</span></label>
                  <div class="col-12 col-md-4">
                    <div class="form-group">
                      <div
                        class="card-header d-flex justify-content-between align-items-center"
                      >
                        <p >Employment? (current or previews)</p>
                        <div
                          [formGroup]="form"
                          class="status-toggle d-flex justify-content-between align-items-center"
                        >
                          <input
                            type="checkbox"
                            id="emmployment"
                            class="check"
                            name="emmployment"
                            formControlName="emmployment"
                          />
                          <label for="emmployment" disabled class="checktoggle" value="true">
                            checkbox
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-md-4">
                    <div class="form-group">
                      <div
                        class="card-header d-flex justify-content-between align-items-center"
                      >
                        <p class="card-title">Auto Accident?</p>
                        <div
                          [formGroup]="form"
                          class="status-toggle d-flex justify-content-between align-items-center"
                        >
                          <input
                            type="checkbox"
                            id="auto_accident"
                            class="check"
                            name="auto_accident"
                            formControlName="auto_accident"
                          />
                          <label for="auto_accident" disabled class="checktoggle" value="true">
                            checkbox
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-md-4">
                    <div class="form-group">
                      <div
                        class="card-header d-flex justify-content-between align-items-center"
                      >
                        <p class="card-title">Other Accident?</p>
                        <div
                          [formGroup]="form"
                          class="status-toggle d-flex justify-content-between align-items-center"
                        >
                          <input
                            type="checkbox"
                            id="other_accident"
                            class="check"
                            name="other_accident"
                            formControlName="other_accident"
                          />
                          <label for="other_accident" disabled class="checktoggle" value="true">
                            checkbox
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div> -->
                <!-- Language -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>Language <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="language"
                      formControlName="language"
                      type="text"
                    />
                  </div>
                </div>
                <!-- Cell Phone -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      Cell Phone <span class="login-danger">*</span></label
                    >
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="phone"
                      formControlName="phone"
                      type="text"
                    />
                  </div>
                </div>
                <!-- Home Phone -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      Home Phone <span class="login-danger">*</span></label
                    >
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="home_phone"
                      formControlName="home_phone"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label
                      >Work Phone <span class="login-danger">*</span></label
                    >
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="work_phone"
                      formControlName="work_phone"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>Email <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="email"
                      formControlName="email"
                      type="email"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>City <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="city"
                      formControlName="city"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>ZIP <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="zip"
                      formControlName="zip"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>State <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="state"
                      formControlName="state"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label
                      >Patient's Address
                      <span class="login-danger">*</span></label
                    >
                    <textarea
                      class="form-control"
                      autocomplete="off"
                      name="address"
                      formControlName="address"
                      rows="3"
                      cols="30"
                    ></textarea>
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms">
                    <label>Referring Provider <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      name="referring_provider"
                      formControlName="referring_provider"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms">
                    <label>NPI <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      name="npi"
                      formControlName="npi"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label
                      >Special Notes<span class="login-danger">*</span></label
                    >
                    <textarea
                      class="form-control"
                      autocomplete="off"
                      name="special_note"
                      formControlName="special_note"
                      rows="3"
                      cols="30"
                    ></textarea>
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>Diagnosis <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="diagnosis_code"
                      formControlName="diagnosis_code"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>Schedule <span class="login-danger">*</span></label>
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="schedule"
                      formControlName="schedule"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label
                      >Summer Schedule
                      <span class="login-danger">*</span></label
                    >
                    <input
                      class="form-control"
                      autocomplete="off"
                      name="summer_schedule"
                      formControlName="summer_schedule"
                      type="text"
                    />
                  </div>
                </div>
                <div class="col-12 col-md-6 col-xl-6">
                  <div class="form-group local-top-form">
                    <label class="local-top">
                      Picture (Max Size: 2Mb, jpg,png)
                      <span class="login-danger">*</span>
                    </label>
                    <div class="settings-btn upload-files-avator">
                      <input
                        type="file"
                        accept="image/*"
                        name="image"
                        id="picture"
                        (change)="onLoadPicture($event)"
                        class="hide-input"
                      />
                      <label for="picture" class="upload">Choose File</label>
                    </div>
                  </div>
                  <div>
                    <img
                      [src]="patient.avatar ?? defaultAvatar"
                      style="width: 250px"
                      alt=""
                    />
                  </div>
                </div>
                <!-- Location -->
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>
                      Location <span class="login-danger">*</span>
                    </label>

                    <mat-select
                      formControlName="location_id"
                      name="location"
                      class="form-control select"
                      placeholder="Select Location"
                    >
                      <mat-option
                        *ngFor="let data of locations"
                        [value]="data.id"
                      >
                        {{ data.title }}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-12">
                  <div class="doctor-submit text-end">
                    <button
                      type="button"
                      class="btn btn-primary submit-form me-2"
                      (click)="onSave()"
                    >
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Specialists -->
      <div class="col-sm-12">
        <div class="card">
          <div class="card-body">
            <form autocomplete="off">
              <div class="row">
                <div class="col-12">
                  <div class="form-heading">
                    <h4>Add Specialist</h4>
                  </div>
                </div>
                <!-- RBT -->
                <div class="col-12 col-md-3">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>RBT <span class="login-danger">*</span></label>
                    <mat-select
                      formControlName="rbt_home_id"
                      name="selectedValue_rbt"
                      class="form-control select"
                      placeholder="Select Specialist"
                    >
                      <mat-option *ngFor="let data of rbts" [value]="data.id">
                        {{ data.full_name }}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
                <div class="col-12 col-md-3">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>RBT 2 <span class="login-danger">*</span></label>
                    <mat-select
                      formControlName="rbt2_school_id"
                      name="selectedValue_rbt2"
                      class="form-control select"
                      placeholder="Select Specialist"
                    >
                      <mat-option *ngFor="let data of rbts" [value]="data.id">
                        {{ data.full_name }}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
                <div class="col-12 col-md-3">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>BCBA <span class="login-danger">*</span></label>
                    <mat-select
                      formControlName="bcba_home_id"
                      name="selectedValue_bcba"
                      class="form-control select"
                      placeholder="Select Specialist"
                    >
                      <mat-option *ngFor="let data of bcbas" [value]="data.id">
                        {{ data.full_name }}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
                <div class="col-12 col-md-3">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>BCBA 2<span class="login-danger">*</span></label>
                    <mat-select
                      formControlName="bcba2_school_id"
                      name="selectedValue_bcba2"
                      class="form-control select"
                      placeholder="Select Specialist"
                    >
                      <mat-option *ngFor="let data of bcbas" [value]="data.id">
                        {{ data.full_name }}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>
                <div class="col-12 col-md-3">
                  <div class="form-group local-forms" [formGroup]="form">
                    <label>Manager<span class="login-danger">*</span></label>
                    <mat-select
                      formControlName="clin_director_id"
                      name="selectedValue_clind"
                      class="form-control select"
                      placeholder="Select Specialist"
                    >
                      <mat-option
                        *ngFor="let data of providers"
                        [value]="data.id"
                      >
                        {{ data.full_name }}
                      </mat-option>
                    </mat-select>
                  </div>
                </div>

                <div class="col-12">
                  <div class="doctor-submit text-end">
                    <button
                      type="button"
                      class="btn btn-primary submit-form me-2"
                      (click)="onSave()"
                    >
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Benefits -->
      <div class="col-sm-12">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-12">
                <div class="form-heading">
                  <h4>Benefits</h4>
                </div>
              </div>

              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Insurer <span class="login-danger">*</span></label>
                  <!-- name="insurer" -->
                  <mat-select
                    formControlName="insurer_id"
                    name="insurer_id"
                    class="form-control select"
                    placeholder="Select Insurer"
                  >
                    <mat-option
                      *ngFor="let insuran of insurances"
                      [value]="insuran.id"
                    >
                      {{ insuran.name }}
                    </mat-option>
                  </mat-select>
                </div>
              </div>

              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label
                    >Insurance I.D. Number<span class="login-danger"
                      >*</span
                    ></label
                  >
                  <input
                    class="form-control"
                    autocomplete="off"
                    name="insurance_identifier"
                    formControlName="insurance_identifier"
                    type="text"
                  />
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label
                    >Insurer Secondary<span class="login-danger">*</span></label
                  >
                  <!-- name="insurer" -->
                  <mat-select
                    formControlName="insurer_secondary_id"
                    name="insurer_id"
                    class="form-control select"
                    placeholder="Select Insurer Secondary"
                  >
                    <mat-option
                      *ngFor="let insuran of insurances"
                      [value]="insuran.id"
                    >
                      {{ insuran.name }}
                    </mat-option>
                  </mat-select>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>
                    Insurance Secondary ID<span class="login-danger">*</span>
                  </label>
                  <input
                    class="form-control"
                    autocomplete="off"
                    name="insurance_secondary_identifier"
                    formControlName="insurance_secondary_identifier"
                    type="text"
                  />
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label> Equhl Id<span class="login-danger">*</span> </label>
                  <input
                    class="form-control"
                    autocomplete="off"
                    name="eqhlid"
                    formControlName="eqhlid"
                    type="text"
                  />
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>
                    Elegibility date<span class="login-danger">*</span>
                  </label>
                  <input
                    class="form-control datetimepicker"
                    name="elegibility_date"
                    formControlName="elegibility_date"
                    type="text"
                    matInput
                    [matDatepicker]="picker2"
                  />
                  <mat-datepicker #picker2></mat-datepicker>
                  <mat-datepicker-toggle
                    matIconSuffix
                    [for]="picker2"
                  ></mat-datepicker-toggle>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>
                    POS Covered<span class="login-danger">*</span>
                  </label>
                  <mat-select
                    multiple
                    class="form-control select"
                    formControlName="pos_covered"
                    placeholder="Select"
                  >
                    <mat-option
                      *ngFor="let data of posCoveredOptions"
                      [value]="data.code"
                    >
                      {{ data.name }}
                    </mat-option>
                  </mat-select>
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>
                    Deductible Individual I/F<span class="login-danger">*</span>
                  </label>
                  <input
                    class="form-control"
                    autocomplete="off"
                    name="deductible_individual_I_F"
                    formControlName="deductible_individual_I_F"
                    type="text"
                  />
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Balance<span class="login-danger">*</span></label>
                  <input
                    class="form-control"
                    autocomplete="off"
                    name="balance"
                    formControlName="balance"
                    type="text"
                  />
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Coinsurance<span class="login-danger">*</span></label>
                  <input
                    class="form-control"
                    autocomplete="off"
                    name="coinsurance"
                    formControlName="coinsurance"
                    type="text"
                  />
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Copayments<span class="login-danger">*</span></label>
                  <input
                    class="form-control"
                    autocomplete="off"
                    name="copayments"
                    formControlName="copayments"
                    type="text"
                  />
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>OOP<span class="login-danger">*</span></label>
                  <input
                    class="form-control"
                    autocomplete="off"
                    name="oop"
                    formControlName="oop"
                    type="text"
                  />
                </div>
              </div>
              <div class="col-12 col-md-6 col-xl-4">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>
                    Patient Control #<span class="login-danger">*</span>
                  </label>
                  <input
                    class="form-control"
                    autocomplete="off"
                    name="patient_control"
                    formControlName="patient_control"
                    type="text"
                  />
                </div>
              </div>

              <div class="col-12 col-md-2">
                <div class="form-group">
                  <div
                    class="card-header d-flex justify-content-between align-items-center"
                  >
                    <p class="card-title">Telehealth</p>
                    <div
                      [formGroup]="form"
                      class="status-toggle d-flex justify-content-between align-items-center"
                    >
                      <input
                        type="checkbox"
                        id="telehealth"
                        class="check"
                        name="telehealth"
                        formControlName="telehealth"
                      />
                      <label for="telehealth" class="checktoggle" value="true">
                        checkbox
                      </label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-12 col-md-2">
                <div class="form-group">
                  <div
                    class="card-header d-flex justify-content-between align-items-center"
                  >
                    <p class="card-title">Pay</p>
                    <div
                      [formGroup]="form"
                      class="status-toggle d-flex justify-content-between align-items-center"
                    >
                      <input
                        type="checkbox"
                        id="pay"
                        class="check"
                        name="pay"
                        formControlName="pay"
                      />
                      <label for="pay" class="checktoggle" value="true">
                        checkbox
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-2">
                <div class="form-group">
                  <div
                    class="card-header d-flex justify-content-between align-items-center"
                  >
                    <p class="card-title">Is Self Subcriber?</p>
                    <div
                      [formGroup]="form"
                      class="status-toggle d-flex justify-content-between align-items-center"
                    >
                      <input
                        type="checkbox"
                        id="is_self_subscriber"
                        class="check"
                        name="is_self_subscriber"
                        formControlName="is_self_subscriber"
                      />
                      <label
                        for="is_self_subscriber"
                        class="checktoggle"
                        value="true"
                      >
                        checkbox
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="doctor-submit text-end">
                  <button
                    type="button"
                    class="btn btn-primary submit-form me-2"
                    (click)="onSave()"
                  >
                    Save
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Intake -->
      <div class="col-sm-12">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-12">
                <div class="form-heading">
                  <h4>Intake</h4>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Welcome<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="welcome"
                    formControlName="welcome"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Consent<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="consent"
                    formControlName="consent"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label
                    >Insurance Card<span class="login-danger">*</span></label
                  >
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="insurance_card"
                    formControlName="insurance_card"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Eligibility<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="eligibility"
                    formControlName="eligibility"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>MNL<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="mnl"
                    formControlName="mnl"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Referral<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="referral"
                    formControlName="referral"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>ADOS<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="ados"
                    formControlName="ados"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>iep<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="iep"
                    formControlName="iep"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label
                    >ASD Diagnosis<span class="login-danger">*</span></label
                  >
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="asd_diagnosis"
                    formControlName="asd_diagnosis"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>CDE<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="cde"
                    formControlName="cde"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Submitted<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="submitted"
                    formControlName="submitted"
                  >
                    <option [value]="null">Select</option>
                    <option
                      *ngFor="let option of intakenOptions"
                      [value]="option.value"
                    >
                      {{ option.key }}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-sm-3">
                <div class="form-group local-forms" [formGroup]="form">
                  <label>Interview<span class="login-danger">*</span></label>
                  <select
                    class="form-control form-select-solid fw-bolder"
                    name="interview"
                    formControlName="interview"
                  >
                    <option [value]="null">Select</option>
                    <option value="pending">Pending</option>
                    <option value="send">Send</option>
                    <option value="receive">Receive</option>
                    <option value="no apply">No Apply</option>
                  </select>
                </div>
              </div>

              <div class="col-12">
                <div class="doctor-submit text-end">
                  <button
                    type="button"
                    class="btn btn-primary submit-form me-2"
                    (click)="onSave()"
                  >
                    Save
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- PAs -->
      <div class="col-sm-12">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-12">
                <div class="card-box">
                  <div class="card-block">
                    <h3 class="card-title">PAs</h3>

                    <!-- PA Service Form -->
                    <div class="row align-items-center mb-4">
                      <div class="col-12 col-md-6 col-xl-4">
                        <!-- PA Service Name -->
                        <div
                          class="form-group local-forms"
                          [formGroup]="paForm"
                        >
                          <label>
                            PA #
                            <span class="login-danger">*</span></label
                          >
                          <input
                            class="form-control"
                            formControlName="pa_service"
                            name="pa_service"
                            required
                            type="text"
                          />
                        </div>
                      </div>

                      <div class="col-12 col-md-6 col-xl-4">
                        <div
                          class="form-group local-forms"
                          [formGroup]="paForm"
                        >
                          <label>
                            CPT Code
                            <span class="login-danger">*</span></label
                          >
                          <mat-select
                            formControlName="cpt"
                            name="cpt"
                            required
                            class="form-control select"
                            placeholder="Select Code"
                          >
                            <mat-option
                              *ngFor="
                                let data of (
                                  insurances
                                  | arrayFind : 'id' : form.value.insurer_id
                                )?.services
                              "
                              [value]="data.code"
                            >
                              {{ data.code }} | {{ data.provider }}
                            </mat-option>
                          </mat-select>
                        </div>
                      </div>
                      <!-- Number of Units -->
                      <div class="col-12 col-md-6 col-xl-4">
                        <div
                          class="form-group local-forms"
                          [formGroup]="paForm"
                        >
                          <label>
                            Number of Units
                            <span class="login-danger">*</span></label
                          >
                          <input
                            class="form-control"
                            formControlName="n_units"
                            name="n_units"
                            required
                            type="number"
                            min="0"
                          />
                        </div>
                      </div>

                      <div class="col-12 col-md-6 col-xl-4">
                        <div
                          class="form-group local-forms"
                          [formGroup]="paForm"
                        >
                          <label>
                            Start Date
                            <span class="login-danger">*</span></label
                          >
                          <input
                            class="form-control datetimepicker"
                            name="start_date"
                            formControlName="start_date"
                            type="text"
                            matInput
                            [matDatepicker]="start_date_picker"
                          />
                          <mat-datepicker #start_date_picker></mat-datepicker>
                          <mat-datepicker-toggle
                            matIconSuffix
                            [for]="start_date_picker"
                          >
                          </mat-datepicker-toggle>
                        </div>
                      </div>

                      <div class="col-12 col-md-6 col-xl-4">
                        <div
                          class="form-group local-forms"
                          [formGroup]="paForm"
                        >
                          <label>
                            End Date
                            <span class="login-danger">*</span></label
                          >
                          <input
                            class="form-control datetimepicker"
                            name="end_date"
                            formControlName="end_date"
                            type="text"
                            matInput
                            [matDatepicker]="end_date_picker"
                          />
                          <mat-datepicker #end_date_picker></mat-datepicker>
                          <mat-datepicker-toggle
                            matIconSuffix
                            [for]="end_date_picker"
                          >
                          </mat-datepicker-toggle>
                        </div>
                      </div>

                      <div class="col-12 text-end">
                        <button
                          type="submit"
                          class="btn btn-primary me-2"
                          [disabled]="paForm.invalid"
                          (click)="onAddPaService()"
                        >
                          Add PA Service
                        </button>
                      </div>
                    </div>

                    <!-- PA Services Table -->
                    <div class="table-responsive">
                      <table class="table table-striped mb-0">
                        <thead>
                          <tr>
                            <th>Name</th>
                            <th>CPT Code</th>
                            <th>Units</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let paService of patient.pa_services">
                            <td>{{ paService.pa_service }}</td>
                            <td>{{ paService.cpt }}</td>
                            <td>{{ paService.n_units }}</td>
                            <td>
                              {{ paService.start_date | date : "shortDate" }}
                            </td>
                            <td>
                              {{ paService.end_date | date : "shortDate" }}
                            </td>
                            <td>
                              <button
                                type="button"
                                class="btn btn-outline-success btn-sm"
                                (click)="onEditPaService(paService)"
                              >
                                <i class="fa fa-pencil"></i>
                              </button>
                              <button
                                type="button"
                                class="btn btn-sm btn-danger"
                                (click)="onDeletePaService(paService)"
                              >
                                <i class="fas fa-trash"></i>
                              </button>
                            </td>
                          </tr>
                          <tr *ngIf="patient.pa_services.length === 0">
                            <td colspan="6" class="text-center">
                              No PA services found
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Files -->
      <div class="col-sm-12">
        <div class="card">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="row">
                <div class="col-xs-12 col-sm-6">
                  <div class="col-xl-12">
                    <label class="form-label">Upload Files: *</label>
                  </div>
                  <div class="col-12">
                    <div class="form-group local-top-form">
                      <label class="local-top">
                        Upload File (Max Size: 2Mb, any type)
                        <span class="login-danger">*</span>
                      </label>
                      <div class="settings-btn upload-files-avator">
                        <input
                          type="file"
                          name="file"
                          id="file"
                          (change)="onLoadFile($event)"
                          class="hide-input"
                        />
                        <label for="file" class="upload">Choose File</label>
                      </div>
                    </div>
                  </div>
                  <div class="row align-items-center">
                    <div class="card card-flush">
                      <!--begin::Header-->
                      <div class="card-header pt-7">
                        <!--begin::Title-->
                        <h3 class="card-title align-items-start flex-column">
                          <span class="card-label fw-bolder text-dark">
                            File list
                          </span>
                        </h3>
                        <div class="card-toolbar"></div>
                      </div>
                      <!--end::Header-->
                      <!--begin::Body-->
                      <div class="card-body">
                        <!--begin::Scroll-->
                        <div class="hover-scroll-overlay-y pe-6 me-n6">
                          <ng-container
                            *ngFor="let file of files; let i = index"
                          >
                            <!--begin::Item-->
                            <div
                              class="rounded border-gray-300 border-1 border-gray-300 border-dashed px-7 py-3 mb-6"
                            >
                              <!--begin::Info-->
                              <div class="d-flex flex-stack mb-3">
                                <!--begin::Wrapper-->
                                <div class="me-3">
                                  <!--begin::Icon-->

                                  <img
                                    src="assets/svg/doc.svg"
                                    class="w-50px ms-n1 me-1"
                                    alt=""
                                  />
                                  <!--end::Icon-->
                                  <!--begin::Title-->
                                  <a
                                    href="#"
                                    onclick="return false;"
                                    class="text-gray-800 text-hover-primary fw-bolder"
                                    >{{ file.name }}</a
                                  >
                                  <!--end::Title-->
                                </div>
                                <!--end::Wrapper-->
                              </div>
                              <!--end::Info-->
                              <!--begin::Customer-->
                              <div class="d-flex flex-stack">
                                <!--begin::Name-->
                                <span class="text-gray-400 fw-bolder"
                                  >Size:
                                  <a
                                    href="#"
                                    onclick="return false;"
                                    class="text-gray-800 text-hover-primary fw-bolder"
                                    >{{ file.size }} Kb.</a
                                  ></span
                                >
                                <!--end::Name-->
                                <!--begin::Label-->
                                <span class="badge badge-light-success">
                                  Active
                                </span>
                                <button
                                  class="btn btn-danger btn-sm"
                                  (click)="onDeleteDocument(i)"
                                >
                                  x
                                </button>
                                <!--end::Label-->
                              </div>
                              <!--end::Customer-->
                            </div>
                            <!--end::Item-->
                          </ng-container>
                        </div>
                        <!--end::Scroll-->
                      </div>
                      <!--end::Body-->
                    </div>

                    <!-- validaciones -->
                    <div class="col-12">
                      <div class="doctor-submit text-end">
                        <button
                          type="button"
                          class="btn btn-primary submit-form me-2"
                          (click)="onSaveFiles()"
                        >
                          Add Files
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xs-12 col-sm-6">
                  <div class="card card-flush">
                    <!--begin::Header-->
                    <div class="card-header pt-7">
                      <!--begin::Title-->
                      <h3 class="card-title align-items-start flex-column">
                        <span class="card-label fw-bolder text-dark">
                          Files Added List
                        </span>
                      </h3>
                      <div class="card-toolbar"></div>
                    </div>
                    <!--end::Header-->
                    <!--begin::Body-->
                    <div class="card-body">
                      <!--begin::Scroll-->
                      <div class="hover-scroll-overlay-y pe-6 me-n6">
                        <div class="col-xs-6">
                          <ng-container *ngFor="let doc of documents">
                            <div class="filesAdded">
                              <!--begin::Wrapper-->
                              <div class="files">
                                <a
                                  href="javascript:void(0);"
                                  (click)="onSelectDoc(doc)"
                                  data-bs-toggle="modal"
                                  [attr.data-bs-target]="'#view-doc-' + doc.id"
                                >
                                  <img
                                    src="assets/svg/doc.svg"
                                    class="w-50px ms-n1 me-1 filesvg"
                                    alt=""
                                  />
                                </a>
                                <div class="infofile">
                                  <a
                                    (click)="onSelectDoc(doc)"
                                    data-bs-toggle="modal"
                                    [attr.data-bs-target]="
                                      '#view-doc-' + doc.id
                                    "
                                  >
                                    {{ doc.name_file }}</a
                                  >
                                  <br />
                                  <span class="text-gray-400 fw-bolder sizeee">
                                    Size:
                                    <a
                                      class="text-gray-800 text-hover-primary fw-bolder"
                                    >
                                      {{ doc.size }} Kb.
                                    </a>
                                  </span>
                                </div>
                                <button
                                  class="btn btn-danger btn-sm"
                                  (click)="onDeleteFile(doc)"
                                >
                                  x
                                </button>
                              </div>
                              <!--end::Wrapper-->
                            </div>
                            <!--end::Info-->

                            <!-- modal -->

                            <div
                              [attr.id]="'view-doc-' + doc.id"
                              class="modal add-modal"
                              role="dialog"
                            >
                              <div
                                class="modal-dialog modal-dialog-centered modal-lg"
                              >
                                <div class="modal-content">
                                  <div class="modal-header">
                                    <h5
                                      class="modal-title"
                                      id="exampleModalLabel"
                                    >
                                      {{ doc.name_file }}
                                    </h5>
                                    <a
                                      (click)="onCloseReload()"
                                      class="btn btn-white me-1"
                                      data-bs-dismiss="modal"
                                    >
                                      Close
                                    </a>
                                  </div>
                                  <div class="modal-body text-center">
                                    <embed
                                      [src]="onGetDocumentIframe(doc.file)"
                                      class="pdf-content"
                                    />
                                    <!-- <div class="m-t-20">
                                                                                                            <a href="javascript:void(0);" (click)="closeReload()" class="btn btn-white me-1" data-bs-dismiss="modal">Close</a>
                                                                                                        </div> -->
                                  </div>
                                </div>
                              </div>
                            </div>

                            <!-- modal -->
                          </ng-container>
                        </div>
                      </div>
                      <!--end::Scroll-->
                    </div>
                    <!--end::Body-->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
